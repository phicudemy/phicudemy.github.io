---
title: ثبت‌نام
slug: register
layout: default
permalink: /register/
---
<div class="container">
    <div class="row">
        <div class="col">
            <form id="registration-form" class="mb-5">
                <h4>ثبت‌نام <span id="event-title"></span></h4>
                <div class="mb-3">
                  <label for="reg-event" class="form-label">نام رویداد</label>
                  <input type="text" id="reg-name" class="form-control" disabled readonly required>
                  <input type="hidden" id="reg-url" class="form-control">
                  <input type="hidden" id="reg-pay1" class="form-control">
                  <input type="hidden" id="reg-pay2" class="form-control">
                </div>
                <div class="mb-3">
                    <span>نوع: </span>
                    <div class="form-check form-check-inline">
                      <input class="form-check-input" type="radio" name="regType" id="preRegRadio" value="pre">
                      <label class="form-check-label" for="preRegRadio">پیش‌ثبت‌نام</label>
                    </div>
                    <div class="form-check form-check-inline">
                      <input class="form-check-input" type="radio" name="regType" id="regRadio" value="register">
                      <label class="form-check-label" for="regRadio">ثبت‌نام</label>
                    </div>
                    <div class="form-check form-check-inline">
                      <input class="form-check-input" type="radio" name="regType" id="studentRegRadio" value="student">
                      <label class="form-check-label" for="studentRegRadio">دانشجویی</label>
                    </div>                
                </div>
                <div class="mb-3">
                    <label for="reg-name" class="form-label">نام و نام خانوادگی</label>
                    <input type="text" id="reg-fullname" class="form-control" required>
                  </div>
  
                <div class="mb-3">
                  <label for="reg-email" class="form-label">ایمیل</label>
                  <input type="email" id="reg-email" class="form-control" required>
                </div>
                <div class="mb-3">
                    <label for="reg-cell" class="form-label">شماره همراه</label>
                    <input type="email" id="reg-phone" class="form-control" required>
                </div>
                <div class="mb-3">
                  <label for="reg-notes" class="form-label">یادداشت</label>
                  <textarea id="reg-notes" class="form-control"></textarea>
                </div>
                <button type="submit" class="btn btn-success float-end">ثبت‌نام</button>
              </form>
              <div id="registration-status"></div>
        </div>
    </div>
</div>
<script>
  async function initRegistrationForm() {
    const eventUrl = localStorage.getItem("event_url");
    const eventTitle = localStorage.getItem("event_title");
    const eventPay1 = localStorage.getItem("event_pay1");
    const eventPay2 = localStorage.getItem("event_pay2");

    const currentUserInfo = await getCurrentUserInfo();
    console.log("User Info:", currentUserInfo);

    if (eventUrl) $('#reg-url').val(eventUrl);
    if (eventTitle) $('#reg-name').val(eventTitle);
    if (eventPay1) $('#reg-pay1').val(eventPay1);
    if (eventPay2) $('#reg-pay2').val(eventPay2);

    // Optionally autofill user fields
    if (currentUserInfo) {
      const [id, email, created_at, full_name, phone] = currentUserInfo;
      $('#reg-fullname').val(full_name || '');
      $('#reg-email').val(email || '');
      $('#reg-phone').val(phone || '');
    } else {

    }
  }
  console.log('test')
  window.onload = initRegistrationForm();
</script>