---
layout: default
---
{%assign pagecollection = site.collections| where: "label", page.collection | first %}
{% assign filtered_posts = site.posts | where: pagecollection.label, page.relative_path  %}

<div class="container-fluid">
  <div class="row post-header p-5" style="min-height: 50vh !important;">
    <div class="col-12 text-center my-auto">
      <h3 class="text-danger"><a class="text-reset" data-bs-toggle="collapse" href="#collapse{{pagecollection.label}}" role="button" aria-expanded="false" aria-controls="collapse{{pagecollection.label}}">{{pagecollection.title}}</a></h3>
      <div class="collapse" id="collapse{{pagecollection.label}}">
        {%for subcollection in site[pagecollection.label]%}
        {% assign subpostsize = filtered_posts | where_exp: "item", "item[pagecollection.label] contains subcollection.relative_path" | size  %}
        {% assign subcoursesize = site.courses | where_exp: "item", "item[pagecollection.label] contains subcollection.relative_path" | size  %}
        {%if subpostsize > 0 or subcoursesize > 0%}<a href="{{subcollection.url}}" class="btn btn-outline-dark btn-lg {%if subcollection.url == page.url%} active{%endif%}"{%if subcollection.url == page.url%} aria-pressed="true"{%endif%}>{{subcollection.title}}</a>{%endif%}
        {%endfor%}
      </div>
      <h1 class="display-1">{{page.title}}</h1>
      <div class="">{{page.content}}</div>
    </div>
  </div>
  <div class="row">
    <div class="col-3">
      <nav id="navbar-sideCats" class="h-100 flex-column align-items-stretch pe-4 border-end">
        <nav class="nav nav-pills  flex-column sticky-top">
          {% for content in site.contents %}
          {% assign contsize = filtered_posts | where: 'contents', content.relative_path % | size %}
          {% if contsize > 0 %}<a class="nav-link text-reset" href="#item-{{content.slug}}">{{content.title}}</a>{%endif%}
          {%endfor%}
        </nav>
      </nav>
    </div>
  
    <div class="col-9">
      <div data-bs-spy="scroll" data-bs-target="#navbar-sideCats" data-bs-smooth-scroll="true" class="scrollspy-example-2" tabindex="0">
        {% for content in site.contents %}
        {% assign contsize = filtered_posts | where: 'contents', content.relative_path % | size %}
        {% if contsize > 0 %}
        <div>
          <h3 class="display-5 mt-5">{{content.title}}</h3>
          <div class="row"  id="item-{{content.slug}}">
            {%assign contposts = filtered_posts | where: 'contents', content.relative_path %}
            {%for post in contposts limit: 3 %}
            <div class="col-lg-4 mb-2">
              {% include cardContent.html%}
            </div>
            {%endfor%}
          </div>
          <div class="row">
            {%for post in contposts offset: 3  limit: 6 %}
            <div class="col-lg-4 mb-2">
              <a href="{{post.url}}">
                <div class="card bg-warning-subtle shadow-sm border-dark h-100">
                  <div class="card-body">
                    <h5 class="card-title">{{post.title}}</h5>
                    <p class="card-subtitle mb-2 text-body-secondary small">
                      {% if post.subtitle %}{{post.subtitle}}
                      {%else%}
                      {% if post.people%}{% for person in post.people %}{% assign ppl = site.people | where: 'relative_path', person | first %}
                      {% if ppl %}{%if ppl.avatar %}<img src="//images.weserv.nl/?url=https://phicudemy.github.io{{ppl.avatar}}&w=20&h=20&fit=cover&mask=circle" class="float-start me-2">{% else %}<i class="bi bi-person-lines-fill"></i>{%endif%} {{ppl.title}}
                      {% endif %}{% endfor %}{% endif %}
                      {%endif%}                                
                      <span class="persianDate float-end" data-timestamp="{{post.date | date: '%s'}}"></span></p>
                  </div>
                </div>
              </a>
            </div>
            {%endfor%}
          </div>
        </div>
        {%endif%}
        {%endfor%}
      </div>
    </div>
  </div>
</div>
